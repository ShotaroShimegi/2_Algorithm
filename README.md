# Micromouse Maze Algorithm

マイクロマウス競技用の迷路情報処理ライブラリ

## 概要

このリポジトリは、マイクロマウスの情報処理部分（迷路情報の取得、更新、格納、経路導出）を実装しています。
実機のコードにサブモジュールとして組み込むことを想定した設計になっています。

## 機能

- **迷路情報の管理**: 16×16の迷路データを効率的に格納・更新
- **壁情報の観測**: センサーデータから壁情報を取得し、既知情報を更新
- **経路探索**: 歩数マップ（距離マップ）を用いた最短経路の計算
- **シミュレーション**: 実際の走行をシミュレートし、アルゴリズムを検証

## ビルド方法

```bash
# Windows (PowerShell)
gcc -std=c11 -O2 src/maze.c -o maze.exe
.\maze.exe

# Linux/macOS
gcc -std=c11 -O2 src/maze.c -o maze
./maze
```

## データ構造

### 壁情報の表現

各セルの壁情報は8ビットで表現されます：
- bit 0: 北壁 (WALL_N)
- bit 1: 西壁 (WALL_W)
- bit 2: 東壁 (WALL_E)
- bit 3: 南壁 (WALL_S)

### 主要な配列

- `truth[16][16]`: 実際の迷路データ（シミュレーション用）
- `known[16][16]`: マウスが既知の壁情報
- `dist[16][16]`: ゴールからの歩数マップ

## アルゴリズム

1. **初期化**: 外周の壁のみを既知情報として設定
2. **観測**: 現在セルの壁情報をセンサーで取得し、既知情報を更新
3. **経路計算**: BFSで歩数マップを計算
4. **移動**: 歩数マップに従い、最も近いセルへ移動
5. **再計算**: 壁でブロックされた場合、その場で観測し再計算

## サブモジュールとしての使用

実機のプロジェクトに組み込む場合：

```bash
cd your-micromouse-project
git submodule add <このリポジトリのURL> lib/maze
git submodule update --init --recursive
```

## ライセンス

[ライセンスを選択してください]

## 作者

[あなたの名前]

## 今後の予定

- [ ] ヘッダーファイルの分離（モジュール化）
- [ ] テストコードの追加
- [ ] 複数ゴール対応
- [ ] 最短経路の記録・再現機能
- [ ] 実機用の軽量化版
